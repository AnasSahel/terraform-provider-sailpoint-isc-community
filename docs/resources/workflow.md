---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "sailpoint_workflow Resource - sailpoint"
subcategory: ""
description: |-
  Manages a SailPoint Workflow. Workflows are custom automation scripts that respond to event triggers and perform a series of actions. See Workflow Documentation https://developer.sailpoint.com/docs/extensibility/workflows/ for more information.
---

# sailpoint_workflow (Resource)

Manages a SailPoint Workflow. Workflows are custom automation scripts that respond to event triggers and perform a series of actions. See [Workflow Documentation](https://developer.sailpoint.com/docs/extensibility/workflows/) for more information.

## Example Usage

```terraform
# Example: Basic workflow with email notification
resource "sailpoint_workflow" "send_email_notification" {
  name        = "Send Email Notification"
  description = "Send an email notification when identity attributes change"
  enabled     = false

  owner = {
    type = "IDENTITY"
    id   = "2c91808568c529c60168cca6f90c1313"
    name = "John Doe"
  }

  trigger = {
    type         = "EVENT"
    display_name = "Identity Attributes Changed"
    attributes = jsonencode({
      id                = "idn:identity-attributes-changed"
      filter            = "$.changes[?(@.attribute == 'manager')]"
      description       = "Triggered when an identity's manager attribute changes"
      attributeToFilter = "manager"
    })
  }

  definition = {
    start = "Send Email"
    steps = jsonencode({
      "Send Email" = {
        actionId = "sp:send-email"
        attributes = {
          body        = "Manager attribute has been changed for $${identity.name}"
          from        = "noreply@example.com"
          recipientId = "$$.identity.id"
          subject     = "Manager Change Notification"
        }
        nextStep     = "success"
        selectResult = null
        type         = "ACTION"
      }
      "success" = {
        type = "success"
      }
    })
  }
}

# Example: Workflow with approval step
resource "sailpoint_workflow" "access_request_approval" {
  name        = "Access Request Approval"
  description = "Workflow for approving access requests"
  enabled     = true

  owner = {
    type = "IDENTITY"
    id   = "2c91808568c529c60168cca6f90c1313"
  }

  trigger = {
    type = "EVENT"
    attributes = jsonencode({
      id          = "idn:access-request-submitted"
      description = "Triggered when an access request is submitted"
    })
  }

  definition = {
    start = "Get Manager"
    steps = jsonencode({
      "Get Manager" = {
        actionId = "sp:get-identity"
        attributes = {
          id = "$$.identity.manager.id"
        }
        nextStep = "Send Approval"
        type     = "ACTION"
      }
      "Send Approval" = {
        actionId = "sp:send-approval"
        attributes = {
          approverIds = ["$$.Get Manager.id"]
          message     = "Please approve access request for $${identity.name}"
        }
        nextStep = "Check Approval"
        type     = "ACTION"
      }
      "Check Approval" = {
        type     = "OPERATOR"
        operator = "Comparison"
        attributes = {
          expression = "$$.Send Approval.approved == true"
        }
        children = [
          {
            nextStep = "Grant Access"
            type     = "success"
          },
          {
            nextStep = "Deny Access"
            type     = "failure"
          }
        ]
      }
      "Grant Access" = {
        actionId = "sp:provision-access"
        attributes = {
          requestId = "$$.trigger.requestId"
        }
        nextStep = "success"
        type     = "ACTION"
      }
      "Deny Access" = {
        actionId = "sp:send-email"
        attributes = {
          recipientId = "$$.identity.id"
          subject     = "Access Request Denied"
          body        = "Your access request has been denied"
        }
        nextStep = "failure"
        type     = "ACTION"
      }
      "success" = {
        type = "success"
      }
      "failure" = {
        type = "failure"
      }
    })
  }
}

# Example: Scheduled workflow
resource "sailpoint_workflow" "daily_report" {
  name        = "Daily Identity Report"
  description = "Generate and email a daily identity report"
  enabled     = true

  owner = {
    type = "IDENTITY"
    id   = "2c91808568c529c60168cca6f90c1313"
    name = "Admin User"
  }

  trigger = {
    type         = "SCHEDULED"
    display_name = "Daily at 9 AM"
    attributes = jsonencode({
      cronExpression = "0 0 9 * * ?"
      timezone       = "America/New_York"
    })
  }

  definition = {
    start = "Generate Report"
    steps = jsonencode({
      "Generate Report" = {
        actionId = "sp:search-identities"
        attributes = {
          query = "attributes.cloudLifecycleState:active"
        }
        nextStep = "Send Report"
        type     = "ACTION"
      }
      "Send Report" = {
        actionId = "sp:send-email"
        attributes = {
          recipientId = "admin@example.com"
          subject     = "Daily Identity Report"
          body        = "Report attached"
          attachments = ["$$.Generate Report.results"]
        }
        nextStep = "success"
        type     = "ACTION"
      }
      "success" = {
        type = "success"
      }
    })
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `definition` (Attributes) Workflow definition containing the workflow logic. Must include `start` (name of first step to execute) and `steps` (JSON string with all workflow steps and their configurations). (see [below for nested schema](#nestedatt--definition))
- `name` (String) Name of the workflow as it appears in the UI.
- `owner` (Attributes) Owner of the workflow. Must be a valid identity reference with `type` (typically 'IDENTITY'), `id` (UUID), and optionally `name`. (see [below for nested schema](#nestedatt--owner))
- `trigger` (Attributes) Trigger configuration defining what initiates the workflow. Must include `type` (e.g., EVENT, SCHEDULED, REQUEST_RESPONSE) and optional `attributes` (trigger-specific configuration as JSON string). (see [below for nested schema](#nestedatt--trigger))

### Optional

- `description` (String) Description of the workflow's purpose and functionality.
- `enabled` (Boolean) Whether the workflow is enabled (true) or disabled (false). Disabled workflows do not execute when triggered. Note: Workflows must be disabled before they can be deleted.

### Read-Only

- `created` (String) ISO-8601 timestamp when the workflow was created (computed).
- `id` (String) Unique identifier (UUID) of the workflow.
- `modified` (String) ISO-8601 timestamp when the workflow was last modified (computed).

<a id="nestedatt--definition"></a>
### Nested Schema for `definition`

Required:

- `start` (String) The name of the first step to execute in the workflow.
- `steps` (String) Workflow steps as a JSON string. Each step defines an action or operator with its configuration.


<a id="nestedatt--owner"></a>
### Nested Schema for `owner`

Required:

- `id` (String) The unique identifier (UUID) of the owner identity.
- `type` (String) The type of the referenced object (e.g., IDENTITY).

Optional:

- `name` (String) The name of the owner identity.


<a id="nestedatt--trigger"></a>
### Nested Schema for `trigger`

Required:

- `type` (String) The type of trigger (e.g., EVENT, SCHEDULED, REQUEST_RESPONSE).

Optional:

- `attributes` (String) Trigger-specific attributes as a JSON string. Structure varies by trigger type.
- `display_name` (String) Display name for the trigger.
